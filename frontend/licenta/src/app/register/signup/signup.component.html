<body>
<mat-card>
  <mat-card-content style="font-family: 'Montserrat', sans-serif;">
    <form (ngSubmit)="formSubmit()" [formGroup]="registerForm" class="login-form">
      <h2>Register</h2>
      <p>register here to create your account</p>

      <!-- Username -->
      <mat-form-field appearance="fill" class="custom-mat-form-field">
        <mat-label>
          <mat-icon matPrefix>person</mat-icon>
          Username
        </mat-label>
        <input [(ngModel)]="user.username" formControlName="username"
               matInput placeholder="Username"/>
        <button (click)="user.username=''" mat-icon-button matSuffix>
          <mat-icon>close</mat-icon>
        </button>
        <mat-error *ngIf="registerForm.get('username')?.hasError('required')">
          Username is required.
        </mat-error>
      </mat-form-field>

      <!-- Password -->
      <mat-form-field appearance="fill" class="custom-mat-form-field">
        <mat-label>
          <mat-icon matPrefix>lock</mat-icon>
          Password
        </mat-label>
        <input [(ngModel)]="user.password" formControlName="password" matInput placeholder="Password" type="password"/>
        <button (click)="user.password=''" mat-icon-button matSuffix>
          <mat-icon>close</mat-icon>
        </button>
        <mat-error *ngIf="registerForm.get('password')?.hasError('required')">
          Password is required.
        </mat-error>
        <mat-error *ngIf="registerForm.get('password')?.hasError('minlength')">
          Password must be at least 8 characters long.
        </mat-error>
        <mat-error *ngIf="registerForm.get('password')?.hasError('pattern')">
          Must contain upper, lower case letters, numbers.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="custom-mat-form-field">
        <mat-label>
          <mat-icon matPrefix>lock</mat-icon>
          Confirm Password
        </mat-label>
        <input [(ngModel)]="user.confirmPassword" formControlName="confirmPassword"
               matInput placeholder="Confirm your Password" type="password"/>
        <button (click)="user.confirmPassword=''" mat-icon-button matSuffix>
          <mat-icon>close</mat-icon>
        </button>
        <mat-error *ngIf="registerForm.get('confirmPassword')?.hasError('required')">
          Confirming your password is required.
        </mat-error>
      </mat-form-field>

      <!-- First name -->
      <mat-form-field appearance="fill" class="custom-mat-form-field">
        <mat-label>
          <mat-icon matPrefix>face</mat-icon>
          First Name
        </mat-label>
        <input [(ngModel)]="user.firstName" formControlName="firstname"
               matInput placeholder="First name"/>
        <button (click)="user.firstName=''" mat-icon-button matSuffix>
          <mat-icon>close</mat-icon>
        </button>
        <mat-error *ngIf="registerForm.get('firstName')?.hasError('required')">
          First name is required.
        </mat-error>
      </mat-form-field>

      <!-- Last name -->
      <mat-form-field appearance="fill" class="custom-mat-form-field">
        <mat-label>
          <mat-icon matPrefix>face</mat-icon>
          Last Name
        </mat-label>
        <input [(ngModel)]="user.lastName" formControlName="lastname"
               matInput placeholder="Last name"/>
        <button (click)="user.lastName=''" mat-icon-button matSuffix>
          <mat-icon>close</mat-icon>
        </button>
        <mat-error *ngIf="registerForm.get('lastName')?.hasError('required')">
          Last name is required.
        </mat-error>
      </mat-form-field>

      <!-- Email -->
      <mat-form-field appearance="fill" class="custom-mat-form-field">
        <mat-label>
          <mat-icon matPrefix>email</mat-icon>
          Email
        </mat-label>
        <input [(ngModel)]="user.email" formControlName="email"
               matInput placeholder="Email"/>
        <button (click)="user.email=''" mat-icon-button matSuffix>
          <mat-icon>close</mat-icon>
        </button>
        <mat-error *ngIf="registerForm.get('email')?.hasError('required')">
          Email is required.
        </mat-error>
        <mat-error *ngIf="registerForm.get('email')?.hasError('email')">
          Email format is not valid.
        </mat-error>
      </mat-form-field>

      <!-- Phone -->
      <mat-form-field appearance="fill" class="custom-mat-form-field">
        <mat-label>
          <mat-icon matPrefix>phone</mat-icon>
          Phone
        </mat-label>
        <input [(ngModel)]="user.phone" formControlName="phone"
               matInput placeholder="Phone number"/>
        <button (click)="user.phone=''" mat-icon-button matSuffix>
          <mat-icon>close</mat-icon>
        </button>
        <mat-error *ngIf="registerForm.get('phone')?.hasError('required')">
          Phone number is required.
        </mat-error>
        <mat-error *ngIf="registerForm.get('phone')?.hasError('pattern')">
          Phone number format is not valid.
        </mat-error>
      </mat-form-field>

      <div class="custom-checkbox-field">
        <label>Choose User Role for the website</label>
        <mat-checkbox (change)="onRoleChange($event, 'NORMAL USER')" [checked]="selectedRole === 'NORMAL USER'"
                      color="primary">Normal User
        </mat-checkbox>
        <mat-checkbox (change)="onRoleChange($event, 'SUPPLIER')" [checked]="selectedRole === 'SUPPLIER'"
                      color="primary">Supplier
        </mat-checkbox>
      </div>


      <button class="login-button" mat-flat-button type="submit">
        REGISTER
      </button>

      <!-- Login Link -->
      <p style="text-align: center; margin-top: 20px;">
        Have an account? <a routerLink='/login' style="color: #6504B5;">Log in</a>
      </p>

    </form>
  </mat-card-content>
</mat-card>
</body>
